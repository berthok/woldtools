<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DarkWold - {{ game.game_name }}</title>
    <style>
        body {
            font-family: Verdana, sans-serif;
            background-color: #121212;
            color:rgb(203, 201, 201);
            margin: 0;
            padding: 0;
        }

        body h1 {
            text-align: center;
        }

        body b {
            color: rgb(188, 121, 121);
        }

        body i {
            color: rgb(97, 139, 164);
        }
        
        .container {
            max-width: 800px;
            position: relative; /* To position child elements relative to the container */
            margin: 0 auto;
            padding: 20px;
        }
        
        .top-right-corner {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color:rgb(64, 64, 64); /* Change as needed */
            color: rgb(112, 112, 112);
            padding: 5px;
            border-radius: 5px;
            font-size: 11px;
            font-style: italic;
        }

        .post {
            position: relative;
            background-color: #1a1a1a;
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .dm-post {
            position: relative;
            background-color:rgb(23, 21, 27);
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-header a {
            color: rgb(125, 164, 212);
            text-decoration: none;
        }
        
        .profile-photo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
        }
        
        .author-info h3 {
            margin: 0;
            font-size: 18px;
        }
        
        .author-info h4 {
            margin: 0;
            font-size: 16px;
            color: #b0b0b0;
        }
        
        .character-info p {
            margin: 5px 0;
        }
        
        .post-content {
            margin-top: 10px;
            font-size: 16px;
        }
        
        .post-content p {
            line-height: 1.5;
        }
        
    </style>
</head>
<body>
    <h1>DarkWold - {{ game.game_name }}</h1>
    <div class="container">
        {% for post in game.posts|reverse %}
        {% if post.dm_post == 1 %}<div class="dm-post">{% else %}<div class="post">{% endif %}
            <div class="post-header">
                <img class="profile-photo" src="profiles/{{game.game_id | replace(' ', '%20')}}/{{ post.character_name }}.png" alt="{{ post.character_name }}" onerror="this.onerror=null; this.src='profiles/default.png';">
                <div class="author-info">
                    <h3>{% if post.dm_post == 1 %}
                            {% if post.dm|length == 1 %}DM - {{ post.dm[0] }}
                                {% elif post.dm|length > 1 %}DMs - {{ post.dm }}
                            {% else %}DM Post
                            {% endif %}
                        {% else %}
                            {% if post.header_urls|length > 0 %}<a href="{{ post.header_urls[0].url }}" target="_blank">{{ post.character_name }}</a>
                            {% else %}{{ post.character_name }}
                            {% endif %} ({{ post.player_name }})
                        {% endif %}</h3>
                    
                    <div class="character-info">
                        {% if post.ac %}<p><strong>Armor Class:</strong> {{ post.ac }}</p>{% endif %}
                        {% if post.pp %}<p><strong>Passive Perception:</strong> {{ post.pp }}</p>{% endif %}
                        {% if post.hp %}<p><strong>Hit Points:</strong> {{ post.hp[0] }}/{{ post.hp[1] }}{% if post.hp[2] != 0 %} and {{ post.hp[2] }} Temp{% endif %}</p>{% endif %}
                        {% if post.conditions %}<p><strong>Conditions:</strong> {{ post.conditions }}</p>{% endif %}
                        {% if post.dice_rolls %}<p><strong>Dice Rolls:</strong> {{ post.dice_rolls }} {% endif %}
                    </div>
                </div>
            </div>
            <div style="height: 2px; background-color: #000; margin: 10px 0;"></div>
            <div class="post-content">
                <p>{{ post.clean_post_contents }}</p>
            </div>
            <div class="top-right-corner">
                {{ post.post_datetime }}
            </div>
        </div>
        {% endfor %}
    </div>
    <script src="script.js"></script>
</body>
</html>
